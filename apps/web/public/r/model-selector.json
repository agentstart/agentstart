{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "model-selector",
  "type": "registry:component",
  "title": "AgentStart Model Selector",
  "description": "Compound component for selecting AI models with search and grouping. Provides a dialog-based command palette interface with provider logo display and keyboard navigation.",
  "dependencies": [
    "@phosphor-icons/react",
    "agentstart",
    "react"
  ],
  "registryDependencies": [
    "@coss/button",
    "@coss/command",
    "@coss/dialog"
  ],
  "files": [
    {
      "path": "src/registry/agentstart/model-selector.tsx",
      "content": "/* agent-frontmatter:start\nAGENT: Model Selector UI Component\nPURPOSE: Complete model selection component with API integration and state management\nUSAGE: import { ModelSelector } from \"agentstart/components\"\nEXPORTS: ModelSelector, ModelSelectorProps\nFEATURES:\n  - Fetches available models from API automatically\n  - Manages model selection state globally via store\n  - Auto-injects modelId into message sending\n  - Dialog-based UI with search and grouping\n  - Provider logo display support\nSEARCHABLE: model selector, model picker, ui component, model switcher\nagent-frontmatter:end */\n\n\"use client\";\n\nimport { CaretDownIcon, CheckIcon } from \"@phosphor-icons/react\";\nimport { useModelSelector } from \"agentstart/client\";\nimport type { ComponentProps, ReactNode } from \"react\";\nimport { useMemo, useState } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from \"@/components/ui/command\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  DialogTrigger,\n} from \"@/components/ui/dialog\";\nimport { cn } from \"@/lib/utils\";\n\n/**\n * Provider logo component with built-in logo URL generation\n * Supports 50+ providers including OpenAI, Anthropic, Google, etc.\n */\nexport type ModelLogoProps = Omit<ComponentProps<\"img\">, \"src\" | \"alt\"> & {\n  provider: string;\n};\n\nconst ModelLogo = ({ provider, className, ...props }: ModelLogoProps) => (\n  <img\n    {...props}\n    alt={`${provider} logo`}\n    className={cn(\"size-4 shrink-0\", className)}\n    height={12}\n    src={`https://models.dev/logos/${provider}.svg`}\n    width={12}\n  />\n);\n\n/**\n * Model Selector Props\n */\nexport interface ModelSelectorProps {\n  /**\n   * Dialog title\n   */\n  title?: ReactNode;\n  /**\n   * Custom className for the dialog content\n   */\n  className?: string;\n  /**\n   * Placeholder text for search input\n   */\n  searchPlaceholder?: string;\n  /**\n   * Empty state text when no models found\n   */\n  emptyText?: string;\n  /**\n   * Whether to group models by provider\n   */\n  groupByProvider?: boolean;\n}\n\n/**\n * Complete Model Selector component with API integration\n *\n * Features:\n * - Automatically fetches available models from the API\n * - Manages selection state globally\n * - Auto-injects modelId when sending messages via useThread\n * - Searchable dialog interface with provider grouping\n *\n * @example\n * ```tsx\n * // Basic usage - uses default trigger\n * <ModelSelector />\n *\n * // Custom trigger\n * <ModelSelector\n *   trigger={<Button>Choose Model</Button>}\n *   groupByProvider={true}\n * />\n * ```\n */\nexport function ModelSelector({\n  title = \"Select Model\",\n  className,\n  searchPlaceholder = \"Search models...\",\n  emptyText = \"No models found.\",\n  groupByProvider = true,\n}: ModelSelectorProps) {\n  const {\n    models,\n    selectedModelId,\n    setSelectedModelId,\n    selectedModel,\n    isEnabled,\n  } = useModelSelector();\n\n  const [open, setOpen] = useState(false);\n\n  // Group models by provider if enabled\n  const groupedModels = useMemo(() => {\n    if (!groupByProvider) {\n      return { All: models };\n    }\n\n    return models.reduce<Record<string, typeof models>>((acc, model) => {\n      const provider = model.provider || \"Other\";\n      if (!acc[provider]) {\n        acc[provider] = [];\n      }\n      acc[provider].push(model);\n      return acc;\n    }, {});\n  }, [models, groupByProvider]);\n\n  // Don't render if models are not configured\n  if (!isEnabled) {\n    return null;\n  }\n\n  const handleSelect = (modelId: string) => {\n    setSelectedModelId(modelId);\n    setOpen(false);\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={setOpen}>\n      <DialogTrigger\n        render={\n          <Button type=\"button\" variant=\"ghost\" size=\"sm\">\n            {selectedModel && <ModelLogo provider={selectedModel.provider} />}\n            <span className=\"truncate\">\n              {selectedModel ? selectedModel.name : \"Select model\"}\n            </span>\n            <CaretDownIcon className=\"ml-auto size-3.5 shrink-0 opacity-50\" />\n          </Button>\n        }\n      />\n\n      <DialogContent className={cn(\"p-0\", className)}>\n        <DialogTitle className=\"sr-only\">{title}</DialogTitle>\n        <Command className=\"**:data-[slot=command-input-wrapper]:h-auto\">\n          <CommandInput\n            className=\"h-auto py-3.5\"\n            placeholder={searchPlaceholder}\n          />\n\n          <CommandList>\n            <CommandEmpty>{emptyText}</CommandEmpty>\n\n            {Object.entries(groupedModels).map(([provider, providerModels]) => (\n              <CommandGroup\n                key={provider}\n                heading={groupByProvider ? provider : undefined}\n              >\n                {Array.isArray(providerModels) &&\n                  providerModels.map((model) => (\n                    <CommandItem\n                      key={model.id}\n                      value={`${model.provider}/${model.name}`}\n                      onSelect={() => handleSelect(model.id)}\n                      className=\"flex items-center gap-2\"\n                    >\n                      <ModelLogo provider={model.provider} />\n                      <span className=\"flex-1 truncate text-left\">\n                        {model.name}\n                      </span>\n                      {selectedModelId === model.id && (\n                        <CheckIcon className=\"ml-auto size-4\" weight=\"bold\" />\n                      )}\n                    </CommandItem>\n                  ))}\n              </CommandGroup>\n            ))}\n          </CommandList>\n        </Command>\n      </DialogContent>\n    </Dialog>\n  );\n}\n",
      "type": "registry:component",
      "target": "components/agent/model-selector.tsx"
    }
  ]
}