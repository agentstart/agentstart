---
title: Prompt Input
description: Input component for sending messages and creating threads
---

The `PromptInput` component provides a rich text input with file attachments, streaming control, and automatic thread creation.

<PromptInputDemo />

## Installation

```bash
npx shadcn@latest add prompt-input --registry=@agentstart
```

## Usage

```tsx
import { PromptInput } from "@/components/agent/prompt-input";

export default function ChatPage({ threadId }: { threadId: string }) {
  return <PromptInput threadId={threadId} />;
}
```

## Props

| Name | Type | Required | Description |
|------|------|----------|-------------|
| `threadId` | `string` | - | Thread ID for chat page usage. If omitted, the component creates a new thread automatically. |
| `initialUsage` | `AgentUsageSummary` | - | Prefills the usage meter before streaming begins. |
| `className` | `string` | - | Additional CSS classes for the input container |

## Features

- **Dual Mode** - Works as both thread creator and message sender
- **File Attachments** - Drag-and-drop or click to upload files
- **Streaming Control** - Stop button appears during streaming
- **Auto-focus** - Automatically focuses on mount
- **Keyboard Shortcuts** - Enter to send, Shift+Enter for new line
- **Loading States** - Visual feedback during submission

## Examples

### Chat Page (Existing Thread)

```tsx
import { PromptInput } from "@/components/agent/prompt-input";

export default function ChatPage({ threadId }: { threadId: string }) {
  return (
    <div className="p-4">
      <PromptInput threadId={threadId} />
    </div>
  );
}
```

### Home Page (Create New Thread)

```tsx
import { PromptInput } from "@/components/agent/prompt-input";

export default function HomePage() {
  // When threadId is not provided, it automatically creates a new thread
  return (
    <div className="flex h-screen items-center justify-center p-4">
      <div className="w-full max-w-2xl">
        <PromptInput />
      </div>
    </div>
  );
}
```

### With Custom Styling

```tsx
import { PromptInput } from "@/components/agent/prompt-input";

export default function StyledInput({ threadId }: { threadId: string }) {
  return (
    <PromptInput
      threadId={threadId}
      className="border-2 border-primary rounded-2xl shadow-lg"
    />
  );
}
```

### With File Upload

```tsx
import { PromptInput } from "@/components/agent/prompt-input";

export default function FileUploadExample({ threadId }: { threadId: string }) {
  return <PromptInput threadId={threadId} />;
}
```

## Behavior

### Thread Creation Flow

When `threadId` is **not** provided:

1. User enters text and clicks send
2. Component creates a new thread
3. Sends the first message to the new thread
4. Navigates to the new thread page

### Message Sending Flow

When `threadId` **is** provided:

1. User enters text and clicks send
2. The component dispatches the request through the active thread
3. Any existing stream is stopped or the message is queued automatically
4. Input and attachments are cleared after a successful send

## Stop Streaming

During streaming, the send button becomes a stop button:

```tsx
<PromptInput threadId={threadId} />
// Automatically shows a stop icon during streaming
```

## File Attachments

The input supports file attachments:

- **Drag and Drop** - Drag files into the input area
- **Click to Upload** - Click the attachment button
- **Multiple Files** - Upload multiple files at once
- **Preview** - Shows thumbnail previews of attached files
- **Remove** - Click X to remove an attachment

## Keyboard Shortcuts

- **Enter** - Send message
- **Shift + Enter** - New line
- **Escape** - Clear input (when focused)

## Loading States

The component shows different states:

- **Idle** - Ready for input (arrow up icon)
- **Submitting** - Sending message (spinner)
- **Streaming** - Receiving response (stop icon)
- **Error** - Shows error icon with tooltip

## TypeScript

```tsx
import type { PromptInputProps } from "@/components/agent/prompt-input";

const props: PromptInputProps = {
  threadId: "thread-123",
  className: "border rounded-lg",
  initialUsage: undefined,
};
```

## Accessibility

- **ARIA labels** - Proper labels for screen readers
- **Keyboard navigation** - Full keyboard support
- **Focus management** - Maintains focus state
- **Error announcements** - Announces errors to screen readers

## Integration

Works seamlessly with other AgentStart components:

```tsx
import { Conversation } from "@/components/agent/conversation";
import { PromptInput } from "@/components/agent/prompt-input";
import { useThread } from "agentstart/client";

export default function ThreadPage({ threadId }: { threadId: string }) {
  useThread(threadId);

  return (
    <div className="flex h-screen flex-col">
      <div className="flex-1 overflow-y-auto">
        <Conversation threadId={threadId} />
      </div>
      <div className="border-t p-4">
        <PromptInput threadId={threadId} />
      </div>
    </div>
  );
}
```

## Next Steps

<Cards>
  <Card title="Conversation" href="/docs/components/conversation" />
  <Card title="Sidebar" href="/docs/components/sidebar" />
  <Card title="Provider" href="/docs/components/provider" />
</Cards>
