---
title: CLI
description: AgentStart comes with a built-in CLI to help you manage database schemas and project setup.
---

## Generate

The `generate` command creates the database schema required by AgentStart. If you're using Drizzle or Prisma, this command generates the right schema for your ORM. For Kysely, it generates an SQL file you can run directly.

```bash title="Terminal"
npx @agentstart/cli generate
```

### Options

- `--output` - Where to save the generated schema
  - Prisma: `prisma/schema.prisma`
  - Drizzle: `schema.ts` in project root
  - Kysely: `schema.sql` in project root
- `--config` - Path to your agent config file (searches `./lib/agent.ts`, `./src/lib/agent.ts` by default)
- `--y` - Skip confirmation prompt

### Example Output

<Tabs items={["Drizzle", "Prisma", "Kysely"]}>
  <Tab value="Drizzle">
    ```ts title="schema.ts"
    import { pgTable, text, timestamp } from "drizzle-orm/pg-core";

    export const thread = pgTable("thread", {
      id: text("id").primaryKey(),
      title: text("title").notNull(),
      userId: text("user_id").notNull(),
      visibility: text("visibility").notNull(),
      lastContext: text("last_context"),
      createdAt: timestamp("created_at").notNull(),
      updatedAt: timestamp("updated_at").notNull(),
    });

    export const message = pgTable("message", {
      id: text("id").primaryKey(),
      threadId: text("thread_id")
        .notNull()
        .references(() => thread.id, { onDelete: "cascade" }),
      role: text("role").notNull(),
      parts: text("parts").notNull(),
      attachments: text("attachments"),
      metadata: text("metadata"),
      createdAt: timestamp("created_at").notNull(),
      updatedAt: timestamp("updated_at").notNull(),
    });

    export const todo = pgTable("todo", {
      id: text("id").primaryKey(),
      threadId: text("thread_id")
        .notNull()
        .references(() => thread.id, { onDelete: "cascade" }),
      todos: text("todos").notNull(),
      createdAt: timestamp("created_at").notNull(),
      updatedAt: timestamp("updated_at").notNull(),
    });
    ```
  </Tab>
  
  <Tab value="Prisma">
    ```prisma title="prisma/schema.prisma"
    model Thread {
      id          String   @id
      title       String
      userId      String
      visibility  String
      lastContext String?
      createdAt   DateTime
      updatedAt   DateTime
      messages    Message[]
      todos       Todo[]

      @@map("thread")
    }

    model Message {
      id          String   @id
      threadId    String
      thread      Thread   @relation(fields: [threadId], references: [id], onDelete: Cascade)
      role        String
      parts       String
      attachments String?
      metadata    String?
      createdAt   DateTime
      updatedAt   DateTime

      @@map("message")
    }

    model Todo {
      id        String   @id
      threadId  String
      thread    Thread   @relation(fields: [threadId], references: [id], onDelete: Cascade)
      todos     String
      createdAt DateTime
      updatedAt DateTime

      @@map("todo")
    }
    ```
  </Tab>
  
  <Tab value="Kysely">
    ```sql title="schema.sql"
    CREATE TABLE "thread" (
      "id" TEXT PRIMARY KEY,
      "title" TEXT NOT NULL,
      "userId" TEXT NOT NULL,
      "visibility" TEXT NOT NULL,
      "lastContext" TEXT,
      "createdAt" DATE NOT NULL,
      "updatedAt" DATE NOT NULL
    );

    CREATE TABLE "message" (
      "id" TEXT PRIMARY KEY,
      "threadId" TEXT NOT NULL REFERENCES "thread"("id"),
      "role" TEXT NOT NULL,
      "parts" TEXT NOT NULL,
      "attachments" TEXT,
      "metadata" TEXT,
      "createdAt" DATE NOT NULL,
      "updatedAt" DATE NOT NULL
    );

    CREATE TABLE "todo" (
      "id" TEXT PRIMARY KEY,
      "threadId" TEXT NOT NULL REFERENCES "thread"("id"),
      "todos" TEXT NOT NULL,
      "createdAt" DATE NOT NULL,
      "updatedAt" DATE NOT NULL
    );
    ```
  </Tab>
</Tabs>

## Migrate

The `migrate` command applies the schema directly to your database. This is available for the built-in Kysely adapter. For Drizzle or Prisma, use your ORM's migration tool.

```bash title="Terminal"
npx @agentstart/cli migrate
```

### Options

- `--config` - Path to your agent config file
- `--y` - Skip confirmation prompt

### Using ORM Migration Tools

<Tabs items={["Drizzle", "Prisma"]}>
  <Tab value="Drizzle">
    ```bash
    npx drizzle-kit generate
    npx drizzle-kit push
    ```
  </Tab>
  
  <Tab value="Prisma">
    ```bash
    npx prisma generate
    npx prisma db push
    ```
  </Tab>
</Tabs>

## Common Issues

### Cannot find module

If you see "Cannot find module X", the CLI can't resolve imports in your config. Try:

1. Remove import aliases and use relative paths
2. Run the CLI
3. Revert to using aliases after

### Config file not found

The CLI searches these locations by default:
- `./lib/agent.ts`
- `./src/lib/agent.ts`
- `./server/agent.ts`

Use `--config` to specify a custom location:

```bash
npx @agentstart/cli generate --config ./custom/path/agent.ts
```

## Next Steps

<Cards>
  <Card title="Database Concepts" href="/docs/concepts/database" />
  <Card title="Drizzle" href="/docs/databases/drizzle" />
  <Card title="Prisma" href="/docs/databases/prisma" />
</Cards>
