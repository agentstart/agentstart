---
title: Thread, Message & Todo
description: Understanding core data models in AgentStart
---

AgentStart organizes agent interactions using three core data models: Threads, Messages, and Todos.

## Threads

A **Thread** represents a conversation session between a user and an agent. Each thread maintains its own context and history.

### Thread Structure

```ts
interface Thread {
  id: string;
  title: string;
  userId: string;
  visibility: "public" | "private";
  lastContext?: unknown;
  createdAt: Date;
  updatedAt: Date;
  metadata?: unknown;
}
```

### Creating Threads

```ts
// Server-side
const { threadId, thread } = await start.api.thread.create({
  title: "Help with TypeScript",
  visibility: "private",
});

// Client-side
const { threadId } = await client.thread.create({
  title: "Help with TypeScript",
});
```

### Listing Threads

```ts
// Get default page of threads for the current session
const { threads, pageInfo } = await start.api.thread.list();

// Paginate by requesting a different page size
const nextPage = await start.api.thread.list({ page: 2, pageSize: 10 });
```

### Deleting Threads

```ts
await start.api.thread.delete({ threadId: "thread-123" });
```

## Messages

**Messages** are individual exchanges within a thread. Each message has a role (user, assistant, system, or tool).

### Message Structure

```ts
interface Message {
  id: string;
  threadId: string;
  role: "user" | "assistant" | "system" | "tool";
  parts: Array<
    | { type: "text"; text: string }
    | { type: "tool-call"; toolName: string; args: unknown }
    | { type: "tool-result"; toolName: string; result: unknown }
    | { type: "file"; url: string; mediaType: string; filename?: string }
  >;
  metadata?: Record<string, unknown>;
  createdAt: Date;
  updatedAt: Date;
}
```

### Message Roles

- **user**: Messages from the user
- **assistant**: Responses from the AI agent
- **system**: System prompts and instructions
- **tool**: Tool execution results

### Sending Messages

```tsx
// Client-side with hooks
const sendMessage = useAgentStore((state) => state.sendMessage, threadId);
await sendMessage({ text: "What is TypeScript?" });
```

### Getting Messages

```tsx
// Client-side
const messages = useAgentStore((state) => state.messages, threadId);

// Server-side
const messages = await start.api.message.get({
  threadId: "thread-123",
});
```

### Message Streaming

Messages are streamed in real-time using Server-Sent Events:

```tsx
const status = useAgentStore((state) => state.status, threadId);

{status === "streaming" && <StreamingIndicator />}
```

## Todos

**Todos** are task management items that help agents track progress and organize complex multi-step work within a thread. They're managed internally by agent tools.

### Todo Structure

```ts
interface Todo {
  id: string;
  content: string;
  status: "pending" | "inProgress" | "completed" | "cancelled";
  priority: "high" | "medium" | "low";
}

interface DBTodo {
  id: string;
  threadId: string;
  todos: Todo[];
  createdAt: Date;
  updatedAt: Date;
}
```

### Todo Status

- **pending**: Task not yet started
- **inProgress**: Currently being worked on (only ONE todo can have this status at a time)
- **completed**: Task finished successfully
- **cancelled**: Task cancelled or no longer relevant

### Todo Priority

- **high**: Critical or urgent tasks
- **medium**: Normal priority tasks
- **low**: Nice-to-have or deferred tasks

### Agent Tools

Todos are managed through built-in agent tools:

#### todo-read

Retrieves the current todo list for a thread:

```ts
// Agent uses this tool internally
// Returns the list of todos with their status and priority
```

#### todo-write

Creates or updates todos for a thread:

```ts
// Agent uses this tool internally to:
// - Create new todos when starting complex tasks
// - Update todo status as work progresses
// - Mark todos as completed
// - Add new todos discovered during implementation
```

### Best Practices

1. **Complex Tasks**: Agents automatically create todos for tasks requiring 3+ steps
2. **One Active Task**: Only one todo should be `inProgress` at any time
3. **Real-time Updates**: Agents update todo status immediately after completing steps
4. **Progress Tracking**: Todos provide visibility into the agent's workflow

### Example Workflow

When you ask an agent to implement a feature:

```
User: "Add user authentication with email and password"

Agent creates todos:
1. [inProgress] Research existing auth implementation
2. [pending] Design authentication schema
3. [pending] Implement login endpoint
4. [pending] Create signup endpoint
5. [pending] Add password hashing
6. [pending] Write tests

As work progresses, the agent updates status:
1. [completed] Research existing auth implementation
2. [inProgress] Design authentication schema
...
```

## Next Steps

<Cards>
  <Card title="SDK" href="/docs/concepts/sdk" />
  <Card title="Client" href="/docs/concepts/client" />
  <Card title="Database" href="/docs/concepts/database" />
</Cards>
