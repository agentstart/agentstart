---
title: API
description: AgentStart API usage
---

# API

When you create an AgentStart instance using `agentStart()`, it provides an `api` object that exposes every endpoint in your agent instance. You can use this to interact with AgentStart server-side.

## Calling API Endpoints on the Server

To call an API endpoint on the server, import your `start` instance and call the endpoint using the `api` object:

```ts title="lib/agent.ts"
import { agentStart } from "agentstart";

export const start = agentStart({
  agent,
  memory,
  appName: "my-app",
});

// Calling endpoints on the server
await start.api.thread.list();
await start.api.thread.get({ id: "thread-123" });
await start.api.message.send({ threadId: "thread-123", content: "Hello" });
```

## Available Endpoints

### Thread Management

```ts
// List all threads
const threads = await start.api.thread.list();

// Get specific thread
const thread = await start.api.thread.get({ id: "thread-123" });

// Create new thread
const newThread = await start.api.thread.create({ 
  title: "My Thread" 
});

// Delete thread
await start.api.thread.delete({ id: "thread-123" });
```

### Message Operations

```ts
// Send message
const response = await start.api.message.send({
  threadId: "thread-123",
  content: "What is TypeScript?",
});

// Get messages
const messages = await start.api.message.list({ 
  threadId: "thread-123" 
});
```

### Todo Management

```ts
// Read todos
const todos = await start.api.todo.read({ threadId: "thread-123" });

// Write todos
await start.api.todo.write({
  threadId: "thread-123",
  todos: [
    { id: "1", content: "Task 1", status: "pending" },
    { id: "2", content: "Task 2", status: "completed" },
  ],
});
```

## Using in API Routes

<Tabs items={["Next.js", "Node.js"]}>
  <Tab value="Next.js">
    ```ts title="app/api/threads/route.ts"
    import { start } from "@/lib/agent";

    export async function GET() {
      const threads = await start.api.thread.list();
      return Response.json(threads);
    }

    export async function POST(request: Request) {
      const body = await request.json();
      const thread = await start.api.thread.create(body);
      return Response.json(thread);
    }
    ```
  </Tab>
  
  <Tab value="Node.js">
    ```ts title="server.ts"
    import express from "express";
    import { start } from "./lib/agent";

    const app = express();

    app.get("/api/threads", async (req, res) => {
      const threads = await start.api.thread.list();
      res.json(threads);
    });

    app.post("/api/threads", async (req, res) => {
      const thread = await start.api.thread.create(req.body);
      res.json(thread);
    });
    ```
  </Tab>
</Tabs>

## Type Safety

The `api` object is fully typed, providing autocomplete and type checking:

```ts
// ✅ TypeScript knows the return type
const thread = await start.api.thread.get({ id: "123" });
//    ^? Thread

// ❌ TypeScript error: missing required parameter
await start.api.thread.get();

// ❌ TypeScript error: wrong parameter type
await start.api.thread.get({ id: 123 });
```

## Error Handling

API calls may throw errors that should be handled:

```ts
try {
  const thread = await start.api.thread.get({ id: threadId });
} catch (error) {
  if (error.code === "NOT_FOUND") {
    // Handle thread not found
  }
  throw error;
}
```

## Next Steps

<Cards>
  <Card title="Client" href="/docs/concepts/client" />
  <Card title="CLI" href="/docs/concepts/cli" />
</Cards>
