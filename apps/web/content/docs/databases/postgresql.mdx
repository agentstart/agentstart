---
title: PostgreSQL
description: Integrate AgentStart with PostgreSQL
---

PostgreSQL is a powerful, open-source relational database management system known for its advanced features, extensibility, and support for complex queries and large datasets.

## Example Usage

Make sure you have PostgreSQL installed and configured. Then, you can connect it directly to AgentStart using Kysely's PostgreSQL dialect.

```ts title="lib/agent.ts"
import { agentStart } from "agentstart";
import { kyselyAdapter } from "agentstart/memory";
import { Kysely, PostgresDialect } from "kysely";
import { Pool } from "pg";

const db = new Kysely({
  dialect: new PostgresDialect({
    pool: new Pool({
      connectionString: process.env.DATABASE_URL,
    }),
  }),
});

export const start = agentStart({
  agent,
  memory: kyselyAdapter(db, {
    type: "postgres", // optional config
  }),
});
```

<Callout>
  For more information, read Kysely's documentation on the
  [PostgresDialect](https://kysely-org.github.io/kysely-apidoc/classes/PostgresDialect.html).
</Callout>

## Schema Generation & Migration

The AgentStart CLI allows you to generate or migrate your database schema based on your configuration.

<table>
  <thead>
    <tr className="border-b">
      <th>
        <p className="font-bold text-[16px] mb-1">PostgreSQL Schema Generation</p>
      </th>
      <th>
        <p className="font-bold text-[16px] mb-1">PostgreSQL Schema Migration</p>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr className="h-10">
      <td>✅ Supported</td>
      <td>✅ Supported</td>
    </tr>
  </tbody>
</table>

```bash title="Schema Generation"
npx @agentstart/cli generate
```

```bash title="Schema Migration"
npx @agentstart/cli migrate
```

## Using with Drizzle

For a better development experience, we recommend using the [Drizzle adapter](/docs/databases/drizzle) which provides type-safe queries and migrations.

```bash tab="npm"
npm install drizzle-orm @neondatabase/serverless
```

```bash tab="bun"
bun add drizzle-orm @neondatabase/serverless
```

```bash tab="pnpm"
pnpm add drizzle-orm @neondatabase/serverless
```

```bash tab="yarn"
yarn add drizzle-orm @neondatabase/serverless
```

```ts title="lib/agent.ts"
import { drizzle } from "drizzle-orm/neon-http";
import { neon } from "@neondatabase/serverless";
import { drizzleAdapter } from "agentstart/memory";

const sql = neon(process.env.DATABASE_URL!);
const db = drizzle(sql);

export const start = agentStart({
  agent,
  memory: drizzleAdapter(db, {
    provider: "postgresql",
    schema: {
      thread: threadsTable,
      message: messagesTable,
      todo: todosTable,
    },
  }),
});
```

## Connection String Format

```bash
DATABASE_URL=postgresql://user:password@localhost:5432/dbname
```

For cloud providers:

```bash
# Neon
DATABASE_URL=postgresql://user:password@ep-xxx.us-east-2.aws.neon.tech/neondb

# Supabase
DATABASE_URL=postgresql://postgres:password@db.xxx.supabase.co:5432/postgres

# Railway
DATABASE_URL=postgresql://postgres:password@containers-us-west-xxx.railway.app:5432/railway
```

## Additional Information

PostgreSQL is supported via the [Kysely](https://kysely.dev/) adapter. Any database supported by Kysely would also be supported. See [Other Relational Databases](/docs/databases/other-relational-databases) for more information.

## Next Steps

<Cards>
  <Card title="Drizzle Adapter" href="/docs/databases/drizzle" />
  <Card title="MySQL" href="/docs/databases/mysql" />
  <Card title="SQLite" href="/docs/databases/sqlite" />
</Cards>
