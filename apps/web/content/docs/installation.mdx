---
title: Installation
description: Learn how to configure AgentStart in your project
---

<Steps>

<Step>

### Install the Package

Let's start by adding AgentStart to your project:

```bash tab="npm"
npm install agentstart
```

```bash tab="bun"
bun add agentstart
```

```bash tab="pnpm"
pnpm add agentstart
```

```bash tab="yarn"
yarn add agentstart
```

<Callout type="info">
If you're using a separate client and server setup, make sure to install AgentStart in both parts of your project.
</Callout>

</Step>

<Step>

### Set Environment Variables

Create a `.env` file in the root of your project and add the following environment variables:

1. **Model Provider API Key** (required)

API key from your model provider (OpenRouter, OpenAI, Anthropic, etc.).

```txt title=".env"
MODEL_PROVIDER_API_KEY=your_api_key_here
```

2. **Database URL** (required)

Connection string for the memory adapter:

```txt title=".env"
DATABASE_URL=postgresql://user:password@localhost:5432/dbname
```

3. **E2B Sandbox** (optional)

Only needed if you explicitly enable the E2B sandbox adapter. Also configure `secondaryMemory` (e.g., Redis) when using E2B.

```txt title=".env"
E2B_API_KEY=your_e2b_key_here
REDIS_URL=redis://user:password@host:port # example secondary memory store
```

4. **Blob Storage** (optional)

Provide one of the supported providers if you need file uploads:

```txt title=".env"
# Vercel Blob
BLOB_READ_WRITE_TOKEN=vercel_blob_rw_...

# AWS S3
AWS_ACCESS_KEY_ID=...
AWS_SECRET_ACCESS_KEY=...
AWS_S3_BUCKET=...

# Cloudflare R2
R2_ACCESS_KEY_ID=...
R2_SECRET_ACCESS_KEY=...
R2_BUCKET_NAME=...
R2_ACCOUNT_ID=...
```

</Step>

<Step>

### Install Model Provider

Choose and install your preferred AI model provider:

<Tabs items={["OpenRouter", "OpenAI", "Anthropic"]}>
  <Tab value="OpenRouter">
    ```bash tab="npm"
    npm install @openrouter/ai-sdk-provider
    ```

    ```bash tab="bun"
    bun add @openrouter/ai-sdk-provider
    ```

    ```bash tab="pnpm"
    pnpm add @openrouter/ai-sdk-provider
    ```

    ```bash tab="yarn"
    yarn add @openrouter/ai-sdk-provider
    ```

    Get your API key from [OpenRouter](https://openrouter.ai/keys)
  </Tab>

  <Tab value="OpenAI">
    ```bash tab="npm"
    npm install @ai-sdk/openai
    ```

    ```bash tab="bun"
    bun add @ai-sdk/openai
    ```

    ```bash tab="pnpm"
    pnpm add @ai-sdk/openai
    ```

    ```bash tab="yarn"
    yarn add @ai-sdk/openai
    ```

    Get your API key from [OpenAI Platform](https://platform.openai.com/api-keys)
  </Tab>

  <Tab value="Anthropic">
    ```bash tab="npm"
    npm install @ai-sdk/anthropic
    ```

    ```bash tab="bun"
    bun add @ai-sdk/anthropic
    ```

    ```bash tab="pnpm"
    pnpm add @ai-sdk/anthropic
    ```

    ```bash tab="yarn"
    yarn add @ai-sdk/anthropic
    ```

    Get your API key from [Anthropic Console](https://console.anthropic.com/)
  </Tab>
</Tabs>

</Step>

<Step>

### Create Agent Instance

Create a file named `agent.ts` in one of these locations:
- `lib/agent.ts`
- `src/lib/agent.ts`
- `server/agent.ts`

```ts title="agent.ts"
import { agentStart } from "agentstart";
import { Agent, agentTools, osTools } from "agentstart/agent";
import { createOpenRouter } from "@openrouter/ai-sdk-provider";

const openrouter = createOpenRouter({
  apiKey: process.env.MODEL_PROVIDER_API_KEY!,
});

const agent = new Agent({
  model: openrouter("google/gemini-2.0-flash-001"),
  instructions: "You are a helpful assistant.",
  tools: {
    ...agentTools, // safe without sandbox
    // ...osTools, // enable only if you configured sandbox in agentStart
    // add your custom tools here
  },
});

export const start = agentStart({
  appName: "my-app",
  agent,
  // ...
});
```

</Step>

<Step>

### Configure Database

AgentStart ships with adapters for popular ORMs and query builders. Pass the adapter to `agentStart` instead of wiring raw drivers yourself.

<Tabs items={["sqlite", "postgres", "mysql", "mongodb"]}>
  <Tab value="sqlite">
    ```ts title="agent.ts"
    import { agentStart } from "agentstart";
    import { drizzleMemoryAdapter } from "agentstart/memory";
    import Database from "better-sqlite3";
    import { drizzle } from "drizzle-orm/better-sqlite3";
    import * as schema from "@/db/schema";

    const sqlite = new Database("agentstart.db");
    const db = drizzle(sqlite);

    export const start = agentStart({
      agent,
      memory: drizzleMemoryAdapter(db, { provider: "sqlite", schema }),
    });
    ```
  </Tab>
  <Tab value="postgres">
    ```ts title="agent.ts"
    import { agentStart } from "agentstart";
    import { kyselyMemoryAdapter } from "agentstart/memory";
    import { Kysely, PostgresDialect } from "kysely";
    import { Pool } from "pg";

    const db = new Kysely({
      dialect: new PostgresDialect({
        pool: new Pool({ connectionString: process.env.DATABASE_URL }),
      }),
    });

    export const start = agentStart({
      agent,
      memory: kyselyMemoryAdapter(db, { type: "postgres" }),
    });
    ```
  </Tab>
  <Tab value="mysql">
    ```ts title="agent.ts"
    import { agentStart } from "agentstart";
    import { prismaMemoryAdapter } from "agentstart/memory";
    import { PrismaClient } from "@prisma/client";

    const prisma = new PrismaClient();

    export const start = agentStart({
      agent,
      memory: prismaMemoryAdapter(prisma, { provider: "mysql" }),
    });
    ```
  </Tab>
  <Tab value="mongodb">
    ```ts title="agent.ts"
    import { agentStart } from "agentstart";
    import { mongodbMemoryAdapter } from "agentstart/memory";
    import { MongoClient } from "mongodb";

    const client = new MongoClient(process.env.DATABASE_URL!);
    await client.connect();

    export const start = agentStart({
      agent,
      memory: mongodbMemoryAdapter(client.db("agentstart")),
    });
    ```
  </Tab>
</Tabs>

<Tabs items={["Drizzle", "Prisma"]}>
  <Tab value="Drizzle">
  ```ts title="agent.ts"
  import { agentStart } from "agentstart";
  import { drizzleMemoryAdapter } from "agentstart/memory";
  import { db } from "@/db"; // your drizzle instance
  import * as schema from "@/db/schema";

  export const start = agentStart({
    memory: drizzleMemoryAdapter(db, {
      provider: "postgresql", // or "mysql", "sqlite"
      schema,
    }),
  })
  ```
  </Tab>
  
  <Tab value="Prisma">
  ```ts title="agent.ts"
  import { agentStart } from "agentstart";
  import { prismaMemoryAdapter } from "agentstart/memory";
  import { PrismaClient } from "@/generated/prisma/client"; // If your Prisma file is located elsewhere, you can change the path

  const prisma = new PrismaClient();

  export const start = agentStart({
    memory: prismaMemoryAdapter(prisma, {
      provider: "sqlite", // or "mysql", "postgresql"
    }),
  })
  ```
  </Tab>
</Tabs>

</Step>

<Step>

### Create Database Tables
AgentStart includes a CLI tool to help manage the schema required by the library.

- **Generate**: This command generates an ORM schema or SQL migration file.

<Callout>
If you're using Kysely, you can apply the migration directly with `migrate` command below. Use `generate` only if you plan to apply the migration manually.
</Callout>

```bash title="Terminal"
npx @agentstart/cli generate
```

- **Migrate**: This command creates the required tables directly in the database. (Available only for the built-in Kysely adapter)

```bash title="Terminal"
npx @agentstart/cli migrate
```

see the [CLI documentation](/docs/concepts/cli) for more information.

<Callout>
  If you instead want to create the schema manually, you can find the core schema required in the [database section](/docs/concepts/database#core-schema).
</Callout>

</Step>

<Step>

### Mount Handler

Create an API route to handle agent requests. The route should handle requests for the path `/api/agent/*`.

<Tabs items={["Next.js", "TanStack Start", "Express", "Node.js"]}>
  <Tab value="Next.js">
    ```ts title="app/api/agent/[...all]/route.ts"
    import { toNextJsHandler } from "agentstart/integration";
    import { start } from "@/lib/agent"; // path to your agent file

    export const { POST, GET } = toNextJsHandler(start.handler);
    ```
  </Tab>
  
  <Tab value="TanStack Start">
    ```ts title="routes/api/agent/$.ts"
    import { createFileRoute } from "@tanstack/react-router";
    import { start } from "@/lib/agent"; // path to your agent file

    export const Route = createFileRoute("/api/agent/$")({
      server: {
        handlers: {
          GET: async ({ request }: { request: Request }) => {
            return await start.handler(request);
          },
          POST: async ({ request }: { request: Request }) => {
            return await start.handler(request);
          },
        },
      },
    });
    ```
  </Tab>
  
  <Tab value="Express">
    ```ts title="server.ts"
    import express from "express";
    import { toNodeHandler } from "agentstart/integration";
    import { start } from "@/lib/agent"; // path to your agent file

    const app = express();
    const handler = toNodeHandler(start.handler);

    app.use("/api/agent", handler);

    app.listen(3000, () => {
      console.log("Server running on http://localhost:3000");
    });
    ```
  </Tab>
  
  <Tab value="Node.js">
    ```ts title="server.ts"
    import { createServer } from "node:http";
    import { toNodeHandler } from "agentstart/integration";
    import { start } from "@/lib/agent"; // path to your agent file

    const handler = toNodeHandler(start.handler);
    const server = createServer(handler);

    server.listen(3000, () => {
      console.log("Server running on http://localhost:3000");
    });
    ```
  </Tab>
</Tabs>

</Step>

<Step>

### Create Client Instance

Create a client to interact with your agent from the frontend:

```ts title="agent-client.ts"
import {
  createAgentClient,
  useAgentStore,
  useThreadStore,
} from "agentstart/client";
export const { client, useThread } = createAgentClient();

export { useAgentStore, useThreadStore };
```

</Step>

<Step>

### ðŸŽ‰ That's it!

You're now ready to use AgentStart in your application. Continue to [Basic Usage](/docs/basic-usage) to learn how to use the agent in your application.

</Step>

</Steps>

## Next Steps

<Cards>
  <Card title="Basic Usage" href="/docs/basic-usage" />
</Cards>
