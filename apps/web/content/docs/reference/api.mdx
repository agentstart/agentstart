---
title: API Reference
description: Complete API reference for AgentStart
---

# API Reference

Complete reference for all AgentStart APIs.

## Core API

### agentStart()

Creates an AgentStart instance with handlers and APIs.

```ts
function agentStart(options: AgentStartOptions): AgentStartInstance
```

**Parameters:**

```ts
interface AgentStartOptions {
  agent: Agent;
  memory: Adapter;
  appName?: string;
  basePath?: string;
  middleware?: Middleware[];
  getUserId?: (headers: Headers) => string | Promise<string>;
}
```

**Returns:**

```ts
interface AgentStartInstance {
  handler: Handler; // oRPC handler
  api: {
    thread: ThreadAPI;
    message: MessageAPI;
    todo: TodoAPI;
  };
}
```

**Example:**

```ts
import { agentStart } from "agentstart";

export const start = agentStart({
  agent,
  memory: drizzleAdapter(db, { provider: "pg", schema }),
  appName: "my-app",
  basePath: "/api/agent",
});
```

## Agent Class

### new Agent()

Creates an AI agent instance.

```ts
class Agent<TContext = unknown> {
  constructor(options: AgentOptions<TContext>)
}
```

**Parameters:**

```ts
interface AgentOptions<TContext> {
  model: LanguageModel;
  instructions: string;
  tools?: Record<string, Tool>;
  context?: TContext;
  streamOptions?: StreamOptions;
}
```

**Example:**

```ts
import { Agent, agentTools } from "agentstart/agent";

const agent = new Agent({
  model: openrouter("x-ai/grok-4-fast"),
  instructions: "You are a helpful assistant.",
  tools: {
    ...agentTools,
  },
});
```

## Database Adapters

### drizzleAdapter()

Drizzle ORM adapter.

```ts
function drizzleAdapter(
  db: DrizzleDB,
  config: DrizzleAdapterConfig
): Adapter
```

**Config:**

```ts
interface DrizzleAdapterConfig {
  provider: "pg" | "mysql" | "sqlite";
  schema: {
    thread: DrizzleTable;
    message: DrizzleTable;
  };
}
```

**Example:**

```ts
import { drizzleAdapter } from "agentstart/memory";

const adapter = drizzleAdapter(db, {
  provider: "pg",
  schema: {
    thread: threadsTable,
    message: messagesTable,
  },
});
```

### prismaAdapter()

Prisma ORM adapter.

```ts
function prismaAdapter(
  prisma: PrismaClient,
  config: PrismaConfig
): Adapter
```

**Config:**

```ts
interface PrismaConfig {
  provider: "postgresql" | "mysql" | "sqlite" | "mongodb";
}
```

**Example:**

```ts
import { prismaAdapter } from "agentstart/memory";

const adapter = prismaAdapter(prisma, {
  provider: "postgresql",
});
```

### kyselyAdapter()

Kysely query builder adapter.

```ts
function kyselyAdapter(
  db: Kysely<any>,
  config?: KyselyAdapterConfig
): Adapter
```

**Config (Optional):**

```ts
interface KyselyAdapterConfig {
  type?: "postgres" | "mysql" | "sqlite" | "mssql";
}
```

**Example:**

```ts
import { kyselyAdapter } from "agentstart/memory";

const adapter = kyselyAdapter(db, {
  type: "postgres",
});
```

### mongodbAdapter()

MongoDB adapter.

```ts
function mongodbAdapter(db: Db): Adapter
```

**Example:**

```ts
import { mongodbAdapter } from "agentstart/memory";

const adapter = mongodbAdapter(db);
```

## Client API

### createAgentClient()

Creates a type-safe client for the browser.

```ts
function createAgentClient(options?: ClientOptions): AgentClient
```

**Options:**

```ts
interface ClientOptions {
  baseURL?: string;
  fetch?: typeof fetch;
}
```

**Returns:**

```ts
interface AgentClient {
  client: {
    thread: {
      create: () => Promise<Thread>;
      list: () => Promise<Thread[]>;
      delete: (params: { id: string }) => Promise<void>;
    };
    todo: {
      read: (params: { threadId: string }) => Promise<Todo[]>;
    };
  };
  useThread: (threadId: string) => void;
}
```

**Example:**

```ts
import { createAgentClient } from "agentstart/client";

export const { client, useThread } = createAgentClient({
  baseURL: "http://localhost:3000",
});
```

### useAgentStore()

Access agent state with Zustand.

```ts
function useAgentStore<T>(
  selector: (state: AgentState) => T,
  threadId: string
): T
```

**State:**

```ts
interface AgentState {
  thread: Thread | null;
  messages: Message[];
  isLoading: boolean;
  isStreaming: boolean;
  error: Error | null;
  sendMessage: (params: { content: string }) => Promise<void>;
  regenerate: () => Promise<void>;
  stop: () => void;
}
```

**Example:**

```tsx
import { useAgentStore } from "agentstart/client";

const messages = useAgentStore((state) => state.messages, threadId);
const sendMessage = useAgentStore((state) => state.sendMessage, threadId);
```

## Tools

### agentTools

Built-in task management tools.

```ts
const agentTools: {
  todoRead: Tool;
  todoWrite: Tool;
}
```

### osTools

Operating system and file tools.

```ts
const osTools: {
  bash: Tool;
  read: Tool;
  write: Tool;
  edit: Tool;
  glob: Tool;
  grep: Tool;
  ls: Tool;
}
```

### Custom Tool

Create custom tools with Zod schemas.

```ts
interface Tool {
  description: string;
  parameters: ZodSchema;
  execute: (params: unknown, context?: unknown) => Promise<unknown>;
}
```

**Example:**

```ts
import { z } from "zod";

const weatherTool = {
  description: "Get current weather",
  parameters: z.object({
    location: z.string(),
    units: z.enum(["celsius", "fahrenheit"]),
  }),
  execute: async ({ location, units }) => {
    // Implementation
    return { temperature: 72, units };
  },
};
```

## Integration Handlers

### toNextJsHandler()

Convert handler to Next.js App Router format.

```ts
function toNextJsHandler(handler: Handler): {
  GET: RouteHandler;
  POST: RouteHandler;
}
```

**Example:**

```ts
import { toNextJsHandler } from "agentstart/integration";

export const { POST, GET } = toNextJsHandler(start.handler);
```

### toNodeHandler()

Convert handler to Node.js HTTP format.

```ts
function toNodeHandler(
  handler: Handler
): (req: IncomingMessage, res: ServerResponse) => Promise<void>
```

**Example:**

```ts
import { toNodeHandler } from "agentstart/integration";
import { createServer } from "node:http";

const httpHandler = toNodeHandler(start.handler);
createServer(httpHandler).listen(3000);
```

## Type Exports

### Common Types

```ts
import type {
  Agent,
  Thread,
  Message,
  Todo,
  Tool,
  Adapter,
  AgentStartOptions,
} from "agentstart";
```

## Next Steps

<Cards>
  <Card title="Basic Usage" href="/docs/basic-usage" />
  <Card title="TypeScript" href="/docs/concepts/typescript" />
  <Card title="Next.js Integration" href="/docs/integrations/next" />
</Cards>
